(()=>{"use strict";var t={451:(t,e,n)=>{t.exports=n.p+"08b808b239f1ce83e4f0.svg"},215:(t,e,n)=>{t.exports=n.p+"53e21ad3b7067c0c555e.svg"},721:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"\n#app {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    position: relative;\n}\n.header {\n    width: 100%;\n    height: 40px;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    align-items: center;\n    padding: 5px;\n    box-sizing: border-box;\n    background-color: #222;\n    color: white;\n    z-index: 1;\n}\n.header > * {\n    margin-right: 10px;\n}\n.header > *:last-child {\n    margin-right: 0;\n}\n#cube {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.bottom {\n    width: 100vw;\n    z-index: 10;\n    position: fixed;\n    bottom: 5px;\n    transition: all .3s ease-out;\n\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: center;\n}\n.control-panel-container {\n    margin-bottom: 8px;\n}\n.input-container {\n    width: 800px;\n}\n.timeline-container {\n    margin-bottom: 8px;\n    width: 800px;\n}\n",""]);const i=o},854:(t,e,n)=>{n.d(e,{Z:()=>h});var r=n(645),o=n.n(r),i=n(667),a=n.n(i),s=n(451),c=n(215),u=o()((function(t){return t[1]})),l=a()(s),f=a()(c);u.push([t.id,"\nul[data-v-57852152] {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    margin: 0;\n    padding: 0;\n    appearance: none;\n    list-style: none;\n}\n.btn[data-v-57852152] {\n    appearance: none;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n.btn[data-v-57852152] {\n    box-sizing: border-box;\n    position: relative;\n    color: white;\n    display: block;\n    padding: 0 10px;\n    width: 30px;\n    height: 30px;\n    font-size: 14px;\n    line-height: 30px;\n    text-align: center;\n    margin: 0 2px;\n    user-select: none;\n}\n.btn[data-v-57852152]:hover {\n    filter: brightness(110%);\n}\n.btn[data-v-57852152]:active {\n    filter: brightness(90%);\n}\n.btn.undo[data-v-57852152] {\n    background-image: url("+l+");\n    background-size: cover;\n    background-position: 0 0;\n    background-repeat: no-repeat;\n    transform: rotateZ(-90deg);\n}\n.btn.redo[data-v-57852152] {\n    background-image: url("+l+");\n    background-size: cover;\n    background-position: 0 0;\n    background-repeat: no-repeat;\n    transform: rotateZ(90deg);\n}\n.btn.reset[data-v-57852152] {\n    background-image: url("+f+");\n    background-size: cover;\n    background-position: 0 0;\n    background-repeat: no-repeat;\n}\n",""]);const h=u},778:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,'\n.main[data-v-122ef834] {\n    position: relative;\n    display: block;\n    background-color: #444;\n    padding: 15px 20px;\n    border-radius: 5px;\n    border: 1px #000 solid;\n    z-index: 10;\n}\n.main input[data-v-122ef834] {\n    height: 30px;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    background-color: inherit;\n    border: none;\n\n    appearance: none;\n    color: white;\n    font-size: 24px;\n    font-family: SansSerif, monospace;\n    font-weight: bold;\n}\n.main input[data-v-122ef834]:focus {\n    outline: none;\n}\n.main input[data-v-122ef834]::selection {\n    background-color: #777;\n}\n.main.error[data-v-122ef834]::after {\n    content: "Error";\n    color: red;\n    position: absolute;\n    right: 10px;\n    top: 0;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n',""]);const i=o},106:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(645),o=n.n(r)()((function(t){return t[1]}));o.push([t.id,"\n.main[data-v-7f3aebf1] {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    flex-wrap: nowrap;\n    height: 60px;\n\n    background-color: #444;\n    border-radius: 5px;\n    border: 1px #000 solid;\n    position: relative;\n\n    overflow: hidden;\n}\n.main[data-v-7f3aebf1]::before, .main[data-v-7f3aebf1]::after {\n    content: '';\n    width: calc(50% - 20px);\n    height: 100%;\n    flex-shrink: 0;\n}\n.main[data-v-7f3aebf1]::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n    background: white;\n    border-radius: 6px;\n}\n.main[data-v-7f3aebf1]::-webkit-scrollbar-thumb {\n    background: green;\n    border-radius: 6px;\n}\n",""]);const i=o},556:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(645),o=n.n(r),i=n(667),a=n.n(i),s=n(215),c=o()((function(t){return t[1]})),u=a()(s);c.push([t.id,"\n.item[data-v-7f3aebf1] {\n    position: relative;\n    height: 40px;\n    width: 40px;\n    line-height: 40px;\n    text-align: center;\n\n    font-size: 30px;\n    font-family: monospace;\n    user-select: none;\n\n    flex-shrink: 0;\n    overflow: visible;\n}\n.item.done[data-v-7f3aebf1] {\n    background: green;\n    color: #ccc;\n}\n.item.waiting[data-v-7f3aebf1] {\n    background: gray;\n}\n.item.starter[data-v-7f3aebf1] {\n    background: orange;\n    color: #fff;\n}\n.item.reset[data-v-7f3aebf1] {\n    background-size: contain;\n    background-image: url("+u+");\n}\n.item[data-v-7f3aebf1]:hover {\n    filter: brightness(1.1);\n    z-index: 10;\n}\n.item[data-v-7f3aebf1]:active {\n    filter: brightness(0.95);\n    z-index: 10;\n}\n.divider[data-v-7f3aebf1] {\n    width: 2px;\n    height: 44px;\n    background: aqua;\n    flex-shrink: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    transform: translate(50%, -2px);\n    z-index: 15;\n}\n",""]);const l=c},985:(t,e,n)=>{var r=n(144),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"header"},[n("label",{attrs:{for:"order"}},[t._v("阶数\n            "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.order,expression:"order"}],attrs:{name:"order",id:"order"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.order=e.target.multiple?n:n[0]},t.onOrderSelect]}},t._l(t.orders,(function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e)+"阶")])})),0)]),t._v(" "),n("button",{on:{click:function(e){t.game.statsEnabled=!t.game.statsEnabled}}},[t._v("Stats")])]),t._v(" "),n("canvas",{ref:"canvas",attrs:{id:"cube"}}),t._v(" "),n("div",{staticClass:"bottom",on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.switchToKeyboard(e)}}},[n("div",{staticClass:"control-panel-container"},[n("control-panel",{attrs:{enabled:t.isKeyboard},on:{commit:t.onControlPanelCommit}})],1),t._v(" "),n("div",{staticClass:"timeline-container"},[n("timeline",{attrs:{manager:t.timelineManager,cube:t.game&&t.game.cube}})],1),t._v(" "),n("div",{staticClass:"input-container"},[n("formula-input",{attrs:{focus:t.inputFocus},on:{"update:focus":function(e){t.inputFocus=e},commit:t.onFormulaCommit}})],1)])])};o._withStripped=!0;var i,a=n(904),s=n(212),c=n(358),u=Math.PI,l=u/2,f="linear";!function(t){t.radiusScale=4,t.lngRange=u/1.5,t.latRange=u/1.5,t.defaultXRate=.7,t.defaultYRate=.35}(i||(i={}));function h(t,e){return Math.abs(t-e)<.001}function p(t){return e=this,n=void 0,o=function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){return[2,new Promise((function(e){setTimeout(e,t)}))]}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}));var e,n,r,o}var d,v=function(){function t(e,n,r){var o=this;this.cube=e,this.name=n,this.filter=r,this.dummy=new s.Kj0,this.move=function(t){return e=o,n=void 0,i=function(){var e=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(n){return this.collect(),[2,new Promise((function(n){c.ZP.to(e,{angle:e.angle+(t?-l:l),duration:.1,ease:f,onComplete:function(){e.release(),n()}})}))]}))},new((r=void 0)||(r=Promise))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((i=i.apply(e,n||[])).next())}));var e,n,r,i},this.axis=t.faceAxis[n]}return Object.defineProperty(t.prototype,"angle",{get:function(){return this.dummy.rotation.toVector3().dot(this.axis)},set:function(t){this.dummy.rotation.setFromVector3(this.dummy.parent.worldToLocal(this.axis.clone().multiplyScalar(t)))},enumerable:!1,configurable:!0}),t.prototype.isResolved=function(){var t=this.getPieces();return t.every((function(e){return e.material===t[0].material}))},t.prototype.getPieces=function(){var t=this;return this.getBlocks().map((function(t){return t.pieces})).flat().filter((function(e){return!h(e.getWorldDirection(new s.Pa4).dot(t.axis),0)}))},t.prototype.getSortedPieces=function(){var t=h(Math.abs(this.axis.x),1)?["y","z"]:h(Math.abs(this.axis.y),1)?["x","z"]:["x","y"],e=t[0],n=t[1],r=function(t,e){return t[1][n]>e[1][n]?1:-1},o=this.getPieces().map((function(t){return[t,t.getWorldPosition(new s.Pa4)]}));o.sort((function(t,n){return t[1][e]>n[1][e]?1:-1}));for(var i=[],a=0;a<this.cube.order;a++){for(var c=[],u=0;u<this.cube.order;u++)c.push(o.shift());c.sort(r),i.push(c)}return i.flat().map((function(t){return t[0]}))},t.prototype.getBlocks=function(){return this.cube.blocks.filter(this.filter)},t.prototype.collect=function(){var t=this;this.getBlocks().forEach((function(e){return t.dummy.attach(e)}))},t.prototype.release=function(){var t=this;this.dummy.children.map((function(t){return t})).forEach((function(e){return t.cube.blockContainer.attach(e)})),this.dummy.rotation.set(0,0,0)},t.prototype.toDescriptor=function(){return this.getSortedPieces().map((function(t){return t.initFace})).join("")},t.prototype.fromDescriptor=function(t){var e=this.getSortedPieces();for(var n in console.assert(t.length===e.length),e)e[n].updateInitFace(t[n])},t.faceAxis={r:new s.Pa4(1,0,0),l:new s.Pa4(-1,0,0),u:new s.Pa4(0,1,0),d:new s.Pa4(0,-1,0),f:new s.Pa4(0,0,1),b:new s.Pa4(0,0,-1)},t}(),b=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y={r:"red",l:"orange",u:"yellow",d:"white",f:"blue",b:"green"},m=new s.DvJ(5,5,5),g=new s.Wid({emissive:"black",side:s.ehD}),w=new s._12(4,4),x={};Object.entries({red:"#c41e3a",orange:"#FF5800",blue:"#0051BA",green:"#009E60",white:"#FFFFFF",yellow:"#FFD500"}).map((function(t){var e=t[0],n=t[1];return x[e]=new s.Wid({emissive:n,roughness:0,side:s.ehD})}));var k=function(t){function e(e){var n=t.call(this,w,x[y[e]])||this;return n.initFace=e,n}return b(e,t),e.prototype.updateInitFace=function(t){this.initFace=t,this.material=x[y[t]]},e}(s.Kj0),_=function(t){function e(){var e=t.call(this,m,g)||this;return e.pieces=new Array,e}return b(e,t),e.prototype.addPiece=function(t){var e=new k(t);return this.add(e),this.pieces.push(e),e},e}(s.Kj0),P=function(){function t(t,e){var n=this;this.scene=t,this.order=e,this.blocks=new Array,this.blockContainer=new s.Kj0(new s.DvJ),this.rotate=function(t,e){return r=n,o=void 0,a=function(){var n=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){return[2,new Promise((function(r){var o=new s.Pa4;o[t]=e?-1:1;var i={value:0},a=0;c.ZP.to(i,{value:l,duration:.1,ease:f,onUpdate:function(){n.blockContainer.rotateOnWorldAxis(o,i.value-a),a=i.value},onComplete:r})}))]}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{c(a.next(t))}catch(t){e(t)}}function s(t){try{c(a.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(n,s)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a},this.createBlocks(),this.createFaces(),this.createPieces(),t.add(this.blockContainer),t.add.apply(t,Object.values(this.faces).map((function(t){return t.dummy})))}return Object.defineProperty(t.prototype,"cubeSize",{get:function(){return 5*this.order},enumerable:!1,configurable:!0}),t.prototype.createBlocks=function(){for(var t=0;t<this.order;t++)for(var e=0;e<this.order;e++)for(var n=0;n<this.order;n++)if(0==n||n==this.order-1||0==e||e===this.order-1||0==t||t==this.order-1){var r=new _;r.position.set(5*(n+.5),5*(e+.5),5*(t+.5)),r.position.sub(new s.Pa4(this.cubeSize/2,this.cubeSize/2,this.cubeSize/2)),this.blockContainer.add(r),this.blocks.push(r)}},t.prototype.createFaces=function(){var t=this;this.faces=Object.freeze({r:new v(this,"r",(function(e){return e.getWorldPosition(new s.Pa4).x>=t.cubeSize/2-5})),l:new v(this,"l",(function(e){return e.getWorldPosition(new s.Pa4).x<=-(t.cubeSize/2-5)})),u:new v(this,"u",(function(e){return e.getWorldPosition(new s.Pa4).y>=t.cubeSize/2-5})),d:new v(this,"d",(function(e){return e.getWorldPosition(new s.Pa4).y<=-(t.cubeSize/2-5)})),f:new v(this,"f",(function(e){return e.getWorldPosition(new s.Pa4).z>=t.cubeSize/2-5})),b:new v(this,"b",(function(e){return e.getWorldPosition(new s.Pa4).z<=-(t.cubeSize/2-5)}))})},t.prototype.createPieces=function(){Object.values(this.faces).forEach((function(t){t.getBlocks().forEach((function(e){var n=e.addPiece(t.name),r=e.getWorldPosition(new s.Pa4);r.add(t.axis.clone().multiplyScalar(2.55)),n.position.copy(e.worldToLocal(r)),0!==t.axis.x?n.rotation.y=l:0!==t.axis.y&&(n.rotation.x=l)}))}))},t.prototype.reset=function(t){void 0===t&&(t=-1),t>0&&(this.order=t),this.blocks.length=0,this.blockContainer.clear(),this.blockContainer.rotation.set(0,0,0),this.blockContainer.position.set(0,0,0),this.createBlocks(),this.createPieces()},t.prototype.isResolved=function(){return Object.values(this.faces).every((function(t){return t.isResolved()}))},t.prototype.toDescriptor=function(){var t=this;return["u","d","f","b","r","l"].map((function(e){return e+"="+t.faces[e].toDescriptor()})).join(";")},t.prototype.fromDescriptor=function(t){var e=this,n=t.split(";");["u","d","f","b","r","l"].forEach((function(t,r){e.faces[t].fromDescriptor(n[r].split("=")[1])}))},t}(),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(e,n,r,o,i,a,s){var c=t.call(this,e,r)||this;return c.camera=e,c.domElement=n,c.radius=r,c.lngRange=o,c.latRange=i,c.defaultXRate=a,c.defaultYRate=s,c._enabled=!1,c.xRate=0,c.yRate=0,c.onMouseMove=function(t){return c.setRate(t.clientX/c.domElement.clientWidth,t.clientY/c.domElement.clientHeight)},c.onMouseEnter=c.onMouseMove,c.onMouseLeave=function(){return c.setRate(c.defaultXRate,c.defaultYRate)},c.enabled=!0,c.setRate(a,s),c}return S(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t?(this.domElement.addEventListener("mousemove",this.onMouseMove),this.domElement.addEventListener("mouseenter",this.onMouseEnter),this.domElement.addEventListener("mouseleave",this.onMouseLeave)):(this.domElement.removeEventListener("mousemove",this.onMouseMove),this.domElement.removeEventListener("mouseenter",this.onMouseEnter),this.domElement.removeEventListener("mouseleave",this.onMouseLeave)),this._enabled=t,this.setRate(this.xRate,this.yRate)},enumerable:!1,configurable:!0}),e.prototype.setRate=function(t,e){var n=this;c.ZP.to(this,{xRate:t,yRate:e,duration:.3,ease:"easeOut",onUpdate:function(){return n.updateCamera()}})},e.prototype.setRadius=function(t){var e=this;c.ZP.fromTo(this,{radius:this.radius<t?.8*t:1.2*t},{radius:t,duration:.5,ease:"power",onUpdate:function(){return e.updateCamera()}})},e.prototype.updateCamera=function(){this.setLngLat(this.lngRange*(this.xRate-.5),-this.latRange*(this.yRate-.5))},e}(function(){function t(t,e){this.camera=t,this.radius=e}return t.prototype.setLngLat=function(t,e){var n=Math.sin(e)*this.radius,r=this.radius*Math.cos(e),o=Math.sin(t)*r,i=Math.cos(t)*r;this.camera.position.set(o,n,i),this.camera.lookAt(0,0,0)},t}()),E=n(219),R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},C=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},T=function(){},M=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.clockwise=e,i.face=n,i.layer=r,i.multilayer=o,i}return R(e,t),e.prototype.do=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,t.faces[this.face].move(this.clockwise)];case 1:return e.sent(),[2]}}))}))},e.prototype.undo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,t.faces[this.face].move(!this.clockwise)];case 1:return e.sent(),[2]}}))}))},e.prototype.redo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,this.do(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.toString=function(){return"LayerMove {face: "+this.face+", layer: "+this.layer+", clockwise: "+this.clockwise+", multilayer: "+this.multilayer+"}"},e}(T),z=function(t){function e(e,n){var r=t.call(this)||this;return r.clockwise=e,r.axis=n,r}return R(e,t),e.prototype.do=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,t.rotate(this.axis,this.clockwise)];case 1:return e.sent(),[2]}}))}))},e.prototype.undo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,t.rotate(this.axis,!this.clockwise)];case 1:return e.sent(),[2]}}))}))},e.prototype.redo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,this.do(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.toString=function(){return"BodyMove {axis: "+this.axis+", clockwise: "+this.axis+"}"},e}(T),F=function(t){function e(){var e=t.call(this)||this;return e.descriptor=null,e}return R(e,t),e.prototype.do=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return this.descriptor=t.toDescriptor(),[4,t.reset()];case 1:return e.sent(),[2]}}))}))},e.prototype.undo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){return t.fromDescriptor(this.descriptor),[2]}))}))},e.prototype.redo=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,this.do(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.toString=function(){return"Reset {}"},e}(T),I=function(){function t(){}return t.prototype.do=function(t){return j(this,void 0,void 0,(function(){return C(this,(function(t){return[2]}))}))},t}(),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.toString=function(){return"UndoMove {}"},e}(I),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.toString=function(){return"RedoMove {}"},e}(I);const A=function(){function t(t){this.cube=t,this.undoStack=[],this.redoStack=[]}return t.prototype.put=function(t){return j(this,void 0,void 0,(function(){var e;return C(this,(function(n){switch(n.label){case 0:return t instanceof T?t instanceof F&&this.undoStack[this.undoStack.length-1]instanceof F?[2]:(this.undoStack.push(t),this.redoStack.length=0,[4,t.do(this.cube)]):[3,2];case 1:return n.sent(),[3,6];case 2:return t instanceof L?0===this.undoStack.length?[2]:(e=this.undoStack.pop(),this.redoStack.unshift(e),[4,e.undo(this.cube)]):[3,4];case 3:return n.sent(),[3,6];case 4:return t instanceof Z?0===this.redoStack.length?[2]:(e=this.redoStack.shift(),this.undoStack.push(e),[4,e.redo(this.cube)]):[3,6];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.UndoMove=new L,t.RedoMove=new Z,t.ResetMove=new F,t}(),N=function(){function t(t){var e=this;this.canvas=t,this.stats=(0,E.Z)(),this._statsEnabled=!1,this.renderLoop=function(){e.stats.begin(),e.renderer.render(e.scene,e.camera),e.stats.end(),requestAnimationFrame(e.renderLoop)},this.onResize=function(){var t=e.canvas,n=t.clientWidth,r=t.clientHeight;e.camera.aspect=n/r,e.camera.updateProjectionMatrix(),e.renderer.setSize(n,r,!1),e.canvas.width=n,e.canvas.height=r},this.scene=new s.xsS,this.scene.background=new s.Ilk(2236962),this.camera=new s.cPb(50,t.clientWidth/t.clientHeight,.1,1e3),this.renderer=new s.CP7({canvas:t,antialias:!0,alpha:!0}),this.cube=new P(this.scene,3),this.cameraControl=new O(this.camera,document.body,this.cube.cubeSize*i.radiusScale,i.lngRange,i.latRange,i.defaultXRate,i.defaultYRate),this.mover=new A(this.cube),this.addLight(),this.renderLoop(),this.onResize(),window.addEventListener("resize",this.onResize)}return t.prototype.reset=function(t){void 0===t&&(t=-1),-1===t&&(t=this.cube.order),this.cube.reset(t),this.cameraControl.setRadius(this.cube.cubeSize*i.radiusScale)},Object.defineProperty(t.prototype,"statsEnabled",{get:function(){return this._statsEnabled},set:function(t){this._statsEnabled=t,t?document.body.append(this.stats.dom):document.body.removeChild(this.stats.dom)},enumerable:!1,configurable:!0}),t.prototype.addLight=function(){var t=new s.Ox3(16777215,.05);t.position.set(1,1,0),this.scene.add(t)},t}();var $=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"main",class:{error:t.error}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{id:"action-input",type:"text",spellcheck:"false",disabled:!t.enabled},domProps:{value:t.value},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.bindEnter(e)},blur:function(e){return t.$emit("update:focus",!1)},focus:function(e){return t.$emit("update:focus",!0)},input:function(e){e.target.composing||(t.value=e.target.value)}}})])};$._withStripped=!0;var D=n(739),G=/((?<face>[udfbrlUDFBRL])(?<multilayer>m?)(?<layer>\d*)|(?<axis>[xyz]))(?<anticlock>'?)/,W=new RegExp("^(("+G.source+") *)+$"),U=new RegExp("("+G.source+") *","y");const K=function(){function t(){}return t.parseSingle=function(t){var e;return t=t.trim(),this.parseMatchGroup(null===(e=G.exec(t))||void 0===e?void 0:e.groups)},t.parseFormula=function(e){var n;if(!t.checkFormula(e))return console.log("formula check failed"),[];for(var r=[];;){var o=this.parseMatchGroup(null===(n=U.exec(e))||void 0===n?void 0:n.groups);if(!o)break;r.push(o)}return r},t.checkFormula=function(t){return W.test(t)},t.parseMatchGroup=function(t){if(!t)return null;if(t.axis){var e=t.axis.toLowerCase(),n=e===t.axis;return new z(n,e)}if(!t.face)return null;var r=t.face.toLowerCase(),o=(n=!t.anticlock,"m"===t.multilayer),i=t.layer?Number.parseInt(t.layer):0;return isNaN(i)&&(i=0),new M(n,r,i,o)},t.test=function(){function e(e){console.log(e,t.parseFormula(e))}["r","R","r0","rm0","rm1","rm10","k","rm","x","x0"].forEach((function(e){var n;console.log(e,null===(n=t.parseSingle(e))||void 0===n?void 0:n.toString())})),e(""),e("rrru"),e("r u r u"),e("rU Ur"),e("r UUr"),e("rm2 r0 r1"),e("xX x0")},t}();var q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};const B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value="",e.error=!1,e}return q(e,t),e.prototype.toggleFocus=function(t){t?this.$refs.input.focus():this.$refs.input.blur()},e.prototype.checkInput=function(t){return this.error=!!t&&!K.checkFormula(t),!this.error},e.prototype.bindEnter=function(){this.checkInput(this.value)&&this.$emit("commit",K.parseFormula(this.value))},X([(0,D.fI)({default:!0})],e.prototype,"enabled",void 0),X([(0,D.fI)({default:!1})],e.prototype,"focus",void 0),X([(0,D.RL)("focus")],e.prototype,"toggleFocus",null),X([(0,D.RL)("value",{immediate:!0})],e.prototype,"checkInput",null),X([(0,a.ZP)({})],e)}(r.Z);var Y=n(379),H=n.n(Y),J=n(778);H()(J.Z,{insert:"head",singleton:!1}),J.Z.locals;var V=n(900),Q=(0,V.Z)(B,$,[],!1,null,"122ef834",null);Q.options.__file="src/components/FormulaInput.vue";const tt=Q.exports;var et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},rt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},ot=function(){function t(){this._closed=!1}return t.prototype.checkClose=function(){if(this._closed)throw new Error("closed")},t.prototype.isClosed=function(){return this._closed},t.prototype.close=function(){this._closed||(this._closed=!0,this.afterClose())},t.prototype.afterClose=function(){},t}(),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.map=function(t){return new ut(this,t)},e.prototype.mapFlat=function(t){return new ft(this.map(t))},e.prototype.filter=function(t){return new lt(this,t)},e.prototype.before=function(t){return new ht(this,t,null)},e.prototype.after=function(t){return new ht(this,null,t)},e}(ot),at=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.sink=n,r.looper=function(){return nt(r,void 0,void 0,(function(){var t,e,n;return rt(this,(function(r){switch(r.label){case 0:r.trys.push([0,5,,6]),r.label=1;case 1:return e=(t=this.sink).put,[4,this.source.get()];case 2:return[4,e.apply(t,[r.sent()])];case 3:return r.sent(),[3,1];case 4:return[3,6];case 5:if(n=r.sent(),!this._closed)throw this.close(),n;return[3,6];case 6:return[2]}}))}))},r}return et(e,t),e.prototype.join=function(){return this.checkClose(),setTimeout(this.looper,0),this},e.prototype.afterClose=function(){this.source instanceof ot&&this.source.close(),this.sink instanceof ot&&this.sink.close()},e}(ot),st=function(t){function e(n){var r=t.call(this)||this;return r.needResolve=[],r.sourcesInfo=n.map((function(t){return{source:t,value:e.NOT_EXISTS}})),r}return et(e,t),e.prototype.startGetter=function(t){return nt(this,void 0,void 0,(function(){var n,r;return rt(this,(function(o){switch(o.label){case 0:t.value=e.GETTING,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.source.get()];case 2:return n=o.sent(),[3,4];case 3:if(r=o.sent(),this._closed)return t.value=e.NOT_EXISTS,[2];throw r;case 4:return this.needResolve.length>0?(this.needResolve.shift()(n),t.value=e.NOT_EXISTS):t.value=n,[2]}}))}))},e.prototype.get=function(){var t=this,n=this.sourcesInfo.find((function(t){return t.value!==e.NOT_EXISTS&&t.value!==e.GETTING}));if(n){var r=n.value;return n.value=e.NOT_EXISTS,Promise.resolve(r)}return new Promise((function(n){t.needResolve.push(n),t.sourcesInfo.filter((function(t){return t.value!==e.GETTING})).forEach((function(e){return t.startGetter(e)}))}))},e.prototype.afterClose=function(){this.sourcesInfo.forEach((function(t){return t.source.close()}))},e.NOT_EXISTS={type:"Not Exists"},e.GETTING={type:"Getting"},e}(it),ct=function(t){function e(e){void 0===e&&(e=0);var n=t.call(this)||this;return n.queueSize=e,n._enabled=!1,n.waiters=[],n.queued=[],n}return et(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.checkClose(),this._enabled!=t&&(this._enabled=t,this.afterEnableChanged(t))},enumerable:!1,configurable:!0}),e.prototype.afterEnableChanged=function(t){},e.prototype.add=function(t){var e=this.waiters.shift();e?e[0].call(null,t):this.queued.length<this.queueSize&&this.queued.push(t)},e.prototype.get=function(){return nt(this,void 0,void 0,(function(){var t=this;return rt(this,(function(e){return this.checkClose(),this.queued.length>0?[2,this.queued.shift()]:[2,new Promise((function(e,n){t.waiters.push([e,n])}))]}))}))},e.prototype.close=function(){this.enabled=!1,t.prototype.close.call(this)},e.prototype.afterClose=function(){this.waiters.forEach((function(t){return t[1]("source closed")})),this.waiters.length=0,this.queued.length=0},e}(it),ut=function(t){function e(e,n){var r=t.call(this)||this;return r.origin=e,r.mapper=n,r}return et(e,t),e.prototype.get=function(){return nt(this,void 0,void 0,(function(){var t,e,n;return rt(this,(function(r){switch(r.label){case 0:return this.checkClose(),e=(t=Promise).resolve,n=this.mapper,[4,this.origin.get()];case 1:return[2,e.apply(t,[n.apply(this,[r.sent()])])]}}))}))},e.prototype.afterClose=function(){this.origin.close()},e}(it),lt=function(t){function e(e,n){var r=t.call(this)||this;return r.origin=e,r.f=n,r}return et(e,t),e.prototype.get=function(){return nt(this,void 0,void 0,(function(){var t;return rt(this,(function(e){switch(e.label){case 0:this.checkClose(),e.label=1;case 1:return[4,this.origin.get()];case 2:return t=e.sent(),this.f(t)?[2,t]:[3,1];case 3:return[2]}}))}))},e.prototype.afterClose=function(){this.origin.close()},e}(it),ft=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this)||this;return r.origin=e,r.usePop=n,r.arr=null,r}return et(e,t),e.prototype.get=function(){return nt(this,void 0,void 0,(function(){var t;return rt(this,(function(e){switch(e.label){case 0:return this.checkClose(),this.arr&&0!==this.arr.length?[3,2]:(t=this,[4,this.origin.get()]);case 1:t.arr=e.sent(),e.label=2;case 2:return this.usePop?[2,this.arr.pop()]:[2,this.arr.shift()]}}))}))},e.prototype.afterClose=function(){this.origin.close()},e}(it),ht=function(t){function e(e,n,r){var o=t.call(this)||this;return o.origin=e,o.beforeAction=n,o.afterAction=r,o}return et(e,t),e.prototype.get=function(){return nt(this,void 0,void 0,(function(){var t;return rt(this,(function(e){switch(e.label){case 0:return this.beforeAction?[4,this.beforeAction()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,this.origin.get()];case 3:return t=e.sent(),this.afterAction?[4,this.afterAction(t)]:[3,5];case 4:e.sent(),e.label=5;case 5:return[2,t]}}))}))},e}(it),pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",{directives:[{name:"long-press",rawName:"v-long-press",value:t.bindUndo,expression:"bindUndo"}],staticClass:"btn undo",on:{mousedown:t.bindUndo}}),t._v(" "),n("li",{directives:[{name:"long-press",rawName:"v-long-press",value:t.bindRedo,expression:"bindRedo"}],staticClass:"btn redo",on:{mousedown:t.bindRedo}}),t._v(" "),n("li",{staticClass:"btn reset",on:{mousedown:t.bindReset}})])};pt._withStripped=!0;var dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};const bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n,r;return dt(e,t),e.prototype.bindUndo=function(){this.enabled&&this.$emit("commit",A.UndoMove)},e.prototype.bindRedo=function(){this.enabled&&this.$emit("commit",A.RedoMove)},e.prototype.bindReset=function(){this.enabled&&this.$emit("commit",A.ResetMove)},vt([(0,D.fI)({default:!1})],e.prototype,"enabled",void 0),vt([(0,a.ZP)({directives:{longPress:(n=800,r=300,void 0===n&&(n=800),void 0===r&&(r=150),{bind:function(t,e){if("function"!=typeof e.value)throw Error("binding must be a function");if(!t.__long_press){var n=t.__long_press={down:!1,startTimer:0,repeatTimer:0},o=e.value,i=function(){o(),n.repeatTimer=window.setInterval(o,r)};t.addEventListener("mousedown",(function(){n.down||(n.down=!0,n.startTimer=window.setTimeout(i,r))})),document.addEventListener("mouseup",(function(){n.down=!1,clearTimeout(n.startTimer),clearTimeout(n.repeatTimer)}))}}})}})],e)}(r.Z);var yt=n(854);H()(yt.Z,{insert:"head",singleton:!1}),yt.Z.locals;var mt=(0,V.Z)(bt,pt,[],!1,null,"57852152",null);mt.options.__file="src/components/ControlPanel.vue";const gt=mt.exports;var wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(t){function e(e,n,r){void 0===r&&(r=0);var o=t.call(this,e,n,r)||this;return o.eventTarget=e,o.eventName=n,o.queueSize=r,o}return wt(e,t),e}(function(t){function e(e,n,r){void 0===r&&(r=0);var o=t.call(this,r)||this;return o.eventTarget=e,o.eventName=n,o.queueSize=r,o.enabled=!0,o}return wt(e,t),e.prototype.afterEnableChanged=function(t){t?this.eventTarget.addEventListener(this.eventName,this.add.bind(this)):this.eventTarget.removeEventListener(this.eventName,this.add.bind(this))},e}(ct)),kt={r:new M(!0,"r",0,!1),"shift+r":new M(!1,"r",0,!1),l:new M(!0,"l",0,!1),"shift+l":new M(!1,"l",0,!1),u:new M(!0,"u",0,!1),"shift+u":new M(!1,"u",0,!1),d:new M(!0,"d",0,!1),"shift+d":new M(!1,"d",0,!1),f:new M(!0,"f",0,!1),"shift+f":new M(!1,"f",0,!1),b:new M(!0,"b",0,!1),"shift+b":new M(!1,"b",0,!1),x:new z(!0,"x"),"shift+x":new z(!1,"x"),y:new z(!0,"y"),"shift+y":new z(!1,"y"),z:new z(!0,"z"),"shift+z":new z(!1,"z"),space:A.ResetMove,backspace:A.UndoMove,"shift+backspace":A.RedoMove,"ctrl+i":A.RedoMove,"ctrl+o":A.UndoMove};function _t(t){return kt[t.getDescriptor()]}KeyboardEvent.prototype.getDescriptor=function(){var t="";this.ctrlKey&&(t+="ctrl+"),this.metaKey&&(t+="meta+"),this.altKey&&(t+="alt+"),this.shiftKey&&(t+="shift+");var e=this.key;return e=e.toLowerCase(),-1!==["shift","alt","control","meta"].indexOf(e)?t=t.substr(0,t.length-1):(" "===e?e="space":"escape"===e&&(e="esc"),t+=e),t};var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},t._l(t.manager.items,(function(e,r){return n("div",{class:t.getClass(e,r),on:{click:function(e){return t.goto(r)}}},[t._v("\n        "+t._s(t.getText(e))+"\n        "),r===t.manager.index?n("div",{staticClass:"divider"}):t._e()])})),0)};Pt._withStripped=!0;var St=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Et=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Rt=function(){},jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return St(e,t),e}(Rt),Ct=function(t){function e(e){var n=t.call(this)||this;return n.move=e,n}return St(e,t),e}(Rt),Tt=function(t){function e(){return t.call(this)||this}return St(e,t),e.instance=new e,e}(Rt),Mt=function(t){function e(){return t.call(this)||this}return St(e,t),e.instance=new e,e}(Rt),zt=function(){function t(){this.items=[new jt],this.index=0}return t.prototype.push=function(t){this.items.push(t)},t.prototype.pop=function(){return 1===this.items.length?null:(this.index===this.items.length-1&&this.index--,this.items.pop())},t.prototype.pushWithClean=function(t){this.items.splice(this.index+1,this.items.length-this.index-1,t)},t.prototype.insert=function(t){this.items.splice(this.index+1,0,t)},t.prototype.forward=function(t){return Ot(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return this.index>=this.items.length-1?[2]:(this.index++,(e=this.items[this.index])instanceof Ct?[4,e.move.do(t)]:[3,2]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.backward=function(t){return Ot(this,void 0,void 0,(function(){var e;return Et(this,(function(n){switch(n.label){case 0:return this.index<1?[2]:(e=this.items[this.index])instanceof Ct?[4,e.move.undo(t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.index--,[2]}}))}))},t.prototype.clear=function(){this.items.splice(1,this.items.length-1),this.index=0},t}(),Ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),It=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Lt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Zt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const At=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveId=0,e}return Ft(e,t),e.prototype.mounted=function(){this.gotoStart()},e.prototype.goto=function(t){return Lt(this,void 0,void 0,(function(){var e;return Zt(this,(function(n){switch(n.label){case 0:if(e=++this.moveId,!(t>this.manager.index))return[3,5];n.label=1;case 1:return t>this.manager.index?[4,p(200)]:[3,4];case 2:return n.sent(),this.moveId!==e?[3,4]:[4,this.manager.forward(this.cube)];case 3:return n.sent(),this.scrollTo(this.manager.index),[3,1];case 4:return[3,9];case 5:if(!(t<this.manager.index))return[3,9];n.label=6;case 6:return t<this.manager.index?[4,p(200)]:[3,9];case 7:return n.sent(),this.moveId!==e?[3,9]:[4,this.manager.backward(this.cube)];case 8:return n.sent(),this.scrollTo(this.manager.index),[3,6];case 9:return[2]}}))}))},e.prototype.indexChanged=function(){this.$nextTick(this.scrollTo.bind(this,this.manager.index))},e.prototype.gotoEnd=function(){return Lt(this,void 0,void 0,(function(){return Zt(this,(function(t){switch(t.label){case 0:return[4,this.goto(this.manager.items.length-1)];case 1:return t.sent(),[2]}}))}))},e.prototype.gotoStart=function(){return Lt(this,void 0,void 0,(function(){return Zt(this,(function(t){switch(t.label){case 0:return[4,this.goto(0)];case 1:return t.sent(),[2]}}))}))},e.prototype.scrollTo=function(t){var e=this.getElement(t);c.ZP.to(this.$el,{scrollLeft:e.offsetLeft-this.$el.clientWidth/2+e.clientWidth,duration:.2,ease:"easeout"})},e.prototype.getElement=function(t){return this.$el.children[t]},e.prototype.getClass=function(t,e){return{item:!0,starter:0===e,done:e<=this.manager.index&&0!==e,waiting:e>this.manager.index,reset:t instanceof Ct&&t.move instanceof F}},e.prototype.getText=function(t){if(t instanceof Ct){var e=t.move;if(e instanceof M)return e.face+(e.clockwise?"":"'");if(e instanceof z)return e.axis+(e.clockwise?"":"'");if(e instanceof F)return""}else{if(t instanceof Tt)return"(";if(t instanceof Mt)return")";if(t instanceof jt)return"0"}},It([(0,D.fI)()],e.prototype,"manager",void 0),It([(0,D.fI)()],e.prototype,"cube",void 0),It([(0,D.RL)("manager.index")],e.prototype,"indexChanged",null),It([(0,a.ZP)({})],e)}(r.Z);var Nt=n(106);H()(Nt.Z,{insert:"head",singleton:!1}),Nt.Z.locals;var $t=n(556);H()($t.Z,{insert:"head",singleton:!1}),$t.Z.locals;var Dt=(0,V.Z)(At,Pt,[],!1,null,"7f3aebf1",null);Dt.options.__file="src/components/Timeline.vue";const Gt=Dt.exports;var Wt,Ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},qt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))},Xt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(t){t.none="None",t.keyboard="Keyboard",t.input="Input"}(Wt||(Wt={}));var Bt=function(){function t(t,e){this.manager=t,this.cube=e}return t.prototype.put=function(t){return qt(this,void 0,void 0,(function(){return Xt(this,(function(e){switch(e.label){case 0:return t instanceof T?t instanceof F&&0===this.manager.index||this.manager.items[this.manager.index]instanceof Ct&&this.manager.items[this.manager.index].move instanceof F?[2]:(this.manager.pushWithClean(new Ct(t)),[4,this.manager.forward(this.cube)]):[3,2];case 1:return e.sent(),[3,6];case 2:return t instanceof L?[4,this.manager.backward(this.cube)]:[3,4];case 3:return e.sent(),[3,6];case 4:return t instanceof Z?[4,this.manager.forward(this.cube)]:[3,6];case 5:e.sent(),e.label=6;case 6:return[2]}}))}))},t}();const Yt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=null,e.orders=[1,2,3,4,5,6,7,8],e.order=3,e.methods=Object.values(Wt),e.method=Wt.none,e.timelineManager=new zt,e.inputFocus=!1,e}return Ut(e,t),e.prototype.mounted=function(){var t=this;this.game=new N(this.$refs.canvas),this.game.statsEnabled=!0,this.method=Wt.keyboard,document.addEventListener("keydown",(function(e){return"ctrl+enter"==e.getDescriptor()?t.switchToInput():void 0})),n.g.cube=this.game.cube},Object.defineProperty(e.prototype,"isInput",{get:function(){return this.method===Wt.input},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isKeyboard",{get:function(){return this.method===Wt.keyboard},enumerable:!1,configurable:!0}),e.prototype.onOrderSelect=function(){this.game.reset(this.order)},e.prototype.switchToInput=function(){var t=this;this.method=Wt.input,this.$nextTick((function(){return t.inputFocus=!0}))},e.prototype.switchToKeyboard=function(){this.method=Wt.keyboard},e.prototype.inputFocusChange=function(t){t?this.switchToInput():this.switchToKeyboard()},e.prototype.onMethodChange=function(t){var e,n,r,o=this;switch(t){case Wt.none:null===(e=this.pipe)||void 0===e||e.close(),this.pipe=new at(null,null);break;case Wt.keyboard:null===(n=this.pipe)||void 0===n||n.close();var i=new xt(document,"keydown",1).map(_t).filter((function(t){return!!t}));this.controlPanelSource=new ct,this.pipe=new at(new st([i,this.controlPanelSource]),new Bt(this.timelineManager,this.game.cube)).join();break;case Wt.input:null===(r=this.pipe)||void 0===r||r.close(),this.formulaSource=new ct,this.pipe=new at(this.formulaSource.mapFlat((function(t){return t})),new Bt(this.timelineManager,this.game.cube)).join()}this.$nextTick((function(){o.inputFocus=t===Wt.input}))},e.prototype.onControlPanelCommit=function(t){return qt(this,void 0,void 0,(function(){return Xt(this,(function(e){return this.controlPanelSource.add(t),[2]}))}))},e.prototype.onFormulaCommit=function(t){this.formulaSource.add(t)},Kt([(0,D.RL)("inputFocus")],e.prototype,"inputFocusChange",null),Kt([(0,D.RL)("method",{immediate:!0})],e.prototype,"onMethodChange",null),Kt([(0,a.ZP)({components:{Timeline:Gt,ControlPanel:gt,FormulaInput:tt}})],e)}(r.Z);var Ht=n(721);H()(Ht.Z,{insert:"head",singleton:!1}),Ht.Z.locals;var Jt=(0,V.Z)(Yt,o,[],!1,null,null,null);Jt.options.__file="src/App.vue";const Vt=Jt.exports;new r.Z({render:function(t){return t(Vt)}}).$mount("#app")}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={179:0},e=[[985,841,736]],r=()=>{};function o(){for(var r,o=0;o<e.length;o++){for(var i=e[o],a=!0,s=1;s<i.length;s++){var c=i[s];0!==t[c]&&(a=!1)}a&&(e.splice(o--,1),r=n(n.s=i[0]))}return 0===e.length&&(n.x(),n.x=()=>{}),r}n.x=()=>{n.x=()=>{},a=a.slice();for(var t=0;t<a.length;t++)i(a[t]);return(r=o)()};var i=o=>{for(var i,a,[c,u,l,f]=o,h=0,p=[];h<c.length;h++)a=c[h],n.o(t,a)&&t[a]&&p.push(t[a][0]),t[a]=0;for(i in u)n.o(u,i)&&(n.m[i]=u[i]);for(l&&l(n),s(o);p.length;)p.shift()();return f&&e.push.apply(e,f),r()},a=self.webpackChunkblankube=self.webpackChunkblankube||[],s=a.push.bind(a);a.push=i})(),n.x()})();